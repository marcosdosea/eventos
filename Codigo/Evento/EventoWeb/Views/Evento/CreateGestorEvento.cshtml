@using Core
@model EventoWeb.Models.GestorEventoModel

@{
ViewData["Title"] = "Associar Gestor ao Evento";
}

<h1>Cadastrar Gestores do Evento</h1>

<div class="row">
    <div class="col-md-6">
        <form asp-action="CreateGestorEvento" method="post">
            <div class="form-group">
                <label for="IdEvento" class="control-label">Evento</label>
                <select id="IdEvento" name="IdEvento" class="form-control">
                    @foreach (var evento in Model.Eventos)
                    {
                    <option value="@evento.Id">@evento.Nome</option>
                    }
                </select>
            </div>
            <div class="form-group">
                <label asp-for="Pessoa.Cpf" class="control-label">CPF</label>
                <input asp-for="Pessoa.Cpf" class="form-control" id="Cpf"/>
                <span asp-validation-for="Pessoa.Cpf" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Pessoa.Nome" class="control-label">Nome</label>
                <input asp-for="Pessoa.Nome" class="form-control" id="Nome"/>
                <span asp-validation-for="Pessoa.Nome" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Pessoa.Telefone1" class="control-label">Telefone</label>
                <input asp-for="Pessoa.Telefone1" class="form-control" id="Telefone1"/>
                <span asp-validation-for="Pessoa.Telefone1" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Pessoa.Email" class="control-label">Email</label>
                <input asp-for="Pessoa.Email" class="form-control" id="Email"/>
                <span asp-validation-for="Pessoa.Email" class="text-danger"></span>
            </div>
            <div class="form-group">
                <input type="submit" value="Adicionar Gestor" class="btn btn-primary"/>
            </div>
        </form>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <h2>Lista de Gestores de Evento</h2>
        <table class="table">
            <thead>
            <tr>
                <th>Nome</th>
                <th>CPF</th>
            </tr>
            </thead>
            <tbody>
            @foreach (var gestor in Model.Gestores)
            {
            <tr>
                <td>@gestor.Nome</td>
                <td>@gestor.Cpf</td>
                <td>
                    <button type="button" class="btn btn-primary" onclick="location.href='@Url.Action("MudarSenha", "Gestor", new { id = gestor.Id })'">Mudar Senha</button>
                    <form asp-action="DeletePessoaPapel" asp-controller="Evento" method="post" style="display:inline;" onsubmit="return confirm('Tem certeza que deseja excluir?');">
                        <input type="hidden" asp-for="Pessoa.Id" value="@gestor.Id" />
                        <input type="hidden" asp-for="IdEvento" value="@Model.IdEvento" />
                        <button type="submit" class="btn btn-danger">Excluir</button>
                    </form>
                </td>
            </tr>
            }
            </tbody>
        </table>
    </div>
</div>